# ğŸ“• tech-interview-study ìë£Œ ê¸°ë¡

## â± ìë£Œ ì‘ì„± ì¼ì

* íšŒì˜ ì¼ì : 2022-01-04

[comment]: <> (2021-00-00ë¡œ ê¸°ë¡í•´ì£¼ì„¸ìš”)

* íšŒì˜ êµ¬ë¶„ : BE

[comment]: <> (BE / FE ë¡œ ê¸°ë¡í•´ì£¼ì„¸ìš”)

* ì°¸ì—¬ ì¸ì› : ì„¤ë¯¼ìš± / ë¬¸í˜œí˜„ / ì´ì¶©í—Œ

[comment]: <> (íšŒì˜ì— ì°¸ì—¬í•œ ì¸ì›ì„ ì ì–´ì£¼ì„¸ìš”)

## ğŸ‘ íšŒì˜ ì£¼ì œ

> ë©´ì ‘ ìŠ¤í„°ë””ì—ì„œ ì–˜ê¸°í•œ ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

### ğŸ“ƒ ì¤€ë¹„í•´ì˜¨ ì§ˆë¬¸ :

[comment]: <> (ì—¬ê¸°ì— ì¤€ë¹„í•´ë‘” ì§ˆë¬¸ë“¤ì„ ì ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.)

### ğŸ™‹â€â™‚ ìë£Œ ì •ë¦¬ :

* ì§ˆë¬¸ ë‚´ìš© :

[comment]: <> (ì§ˆë¬¸ ë‚´ìš©ì— ë”°ë¼ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.)

1. ë®¤í…ìŠ¤ëŠ” ë¬´ì—‡ì¸ê°€?

ê³µìœ ëœ ìì›ì˜ ë°ì´í„°ë¥¼ ì˜¤ì§ 1ê°œì˜ í”„ë¡œì„¸ìŠ¤(or ì“°ë ˆë“œ) ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ë§‰ì•„ì£¼ëŠ” ê²ƒ

Locking ë©”ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•´ì„œ ì˜¤ì§ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œì´ ë™ì¼í•œ ì‹œì ì—ì„œ ë®¤í…ìŠ¤ë¥¼ ì–»ì–´ ì„ê³„ì˜ì—­ì— ë“¤ì–´ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
wait (mutex);
 
â€¦.. Critical Section â€¦..
 
signal (mutex);
```

2. ì„¸ë§ˆí¬ì–´ëŠ” ë¬´ì—‡ì¸ê°€?

ê³µìœ ëœ ìì›ì˜ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤(or ì“°ë ˆë“œ)ê°€ ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ë§‰ì•„ì£¼ëŠ” ê²ƒ

Signaling ë©”ì»¤ë‹ˆì¦˜ì„ ì´ìš©í•´ì„œ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤(or ì“°ë ˆë“œ)ê°€ ë™ì¼í•œ ì‹œì ì—ì„œ ë®¤í…ìŠ¤ë¥¼ ì–»ì–´ ì„ê³„ì˜ì—­ì— ë“¤ì–´ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
struct semaphore{
    int count;
    queueType queue;
};

void semWait(semaphore s){
    s.count--;
    if(s.count<=0){
        // ë½ì´ ê±¸ë¦¬ê³  ê³µìœ  ìì›ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ 
    }
}

void semSignal(semaphore s){
    s.count++;
    if(s.count<=0){
        // ì•„ì§ ë½ì— ê±¸ë ¤ ëŒ€ê¸°ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ìˆìŒ 
    }
}
```

3. ì ìëŠ” ì´ë°œì‚¬ ë¬¸ì œì˜ í•´ê²° ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?

ì´ë°œì‚¬ì™€ ì†ë‹˜ì´ ê²½ìŸ ì¡°ê±´ì— ë†“ì´ì§€ ì•Šë„ë¡ í•˜ëŠ” ë¬¸ì œ

![image](https://user-images.githubusercontent.com/42922298/147987760-cef870d3-bcac-4f70-a55e-a47f127b80dd.png)

```
# ì²˜ìŒ ë‘ ë³€ìˆ˜ëŠ” mutex ì„. (0ê³¼ 1ë§Œ ê°€ëŠ¥)
Semaphore barberReady = 0
Semaphore accessWRSeats = 1 # 1ì´ ë˜ë©´ ë‚¨ì€ ëŒ€ê¸°ì‹¤ ì˜ìê°€ ëŠ˜ì–´ë‚¬ê±°ë‚˜ ì¤„ì–´ë“¬.
Semaphore custReady = 0 # í˜„ì¬ ëŒ€ê¸°ì‹¤ì—ì„œ ì´ë°œì„ ê¸°ë‹¤ë¦¬ëŠ” ì†ë‹˜ë“¤ì˜ ìˆ˜
int numberOfFreeWRSeats = N # ë¹ˆ ëŒ€ê¸°ì‹¤ ì˜ìì˜ ê°œìˆ˜

def Barber():
  while true:                   # ë¬´í•œ ë£¨í”„ì˜ ì‹œì‘
    wait(custReady)             # ëŒ€ê¸°ì‹¤ì˜ ì†ë‹˜ í™•ì¸ â€“ ì•„ë¬´ë„ ì—†ìœ¼ë©´ ì .
    wait(accessWRSeats)         # ê¸°ìƒ â€“ ë¹ˆ ëŒ€ê¸°ì‹¤ ì˜ì ê°œìˆ˜ë¥¼ ë°”ê¾¸ë ¤ í•¨, ì•ˆë˜ë©´ ì .
    numberOfFreeWRSeats += 1    # ì†ë‹˜ì„ ë¶€ë¦„. ëŒ€ê¸°ì‹¤ì˜ ë¹ˆ ì˜ì í•˜ë‚˜ê°€ ëŠ˜ì–´ë‚¨.
    signal(barberReady)         # ì´ë°œì‚¬ê°€ ì´ë°œí•  ì¤€ë¹„ê°€ ëë‚¨.
    signal(accessWRSeats)       # ë¹ˆ ëŒ€ê¸°ì‹¤ ì˜ì ìˆ˜ì— ëŒ€í•œ ë¡(lock)ì´ í•„ìš”ì—†ìŒ.

    # (ì´ë°œì„ í•œë‹¤.)

def Customer():
    wait(accessWRSeats)         # ë¹ˆ ëŒ€ê¸°ì‹¤ ì˜ì ê°œìˆ˜ë¥¼ ë°”ê¾¸ë ¤ í•¨.
    if numberOfFreeWRSeats > 0: # ë§Œì•½ ë¹ˆ ìë¦¬ê°€ ìˆìœ¼ë©´:
      numberOfFreeWRSeats -= 1  # ë¹ˆ ìë¦¬ì— ì•‰ëŠ”ë‹¤. ë¹ˆ ìë¦¬ê°€ í•˜ë‚˜ ì—†ì–´ì§.
      signal(custReady)         # ê¸°ë‹¤ë¦¬ëŠ” ì‚¬ëŒì´ ìˆë‹¤ê³  ì´ë°œì‚¬ì—ê²Œ ë§í•œë‹¤.
      signal(accessWRSeats)     # ë¹ˆ ëŒ€ê¸°ì‹¤ ì˜ì ìˆ˜ì— ëŒ€í•œ ë¡(lock)ì´ í•„ìš” ì—†ìŒ
      wait(barberReady)         # ì´ë°œì‚¬ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.

      # (ì´ë°œì„ ë°›ëŠ”ë‹¤.)

    else:                       # ê·¸ë ‡ì§€ ì•Šê³  ìë¦¬ê°€ ì—†ìœ¼ë©´; ìš´ì´ ì—†ë„¤â€¦
      signal(accessWRSeats)     # ëŒ€ê¸°ì‹¤ ë¹ˆ ì˜ì ìˆ˜ì— ëŒ€í•œ ë¡(lock)ì€ ë°˜ë‚©!

      # (ì´ë°œì„ ë°›ì§€ ëª»í•˜ê³ , ì´ë°œì†Œë¥¼ ë– ë‚œë‹¤.)
```

![image](https://user-images.githubusercontent.com/42922298/147988877-09bad557-7691-4c0f-8b28-b5e8c7faad38.png)

3ê°œì˜ ì„¸ë§ˆí¬ì–´ë¥¼ ì´ìš©í•´ì„œ ë§Œë“­ë‹ˆë‹¤.

4. ì‹ì‚¬í•˜ëŠ” ì² í•™ìë“¤ì˜ ë¬¸ì œì˜ í•´ê²° ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?

ì œí•œëœ ìˆ˜ì˜ ìì›ì— ì ‘ê·¼í•˜ëŠ” ë¬¸ì œ

![image](https://user-images.githubusercontent.com/42922298/147986409-91e6e479-a69f-46dc-bb6d-cdd93498ed3a.png)

![image](https://user-images.githubusercontent.com/42922298/147986469-6fb365b8-bf13-4251-bcfa-7b5e651f09ef.png)

```java
import java.util.concurrent.Semaphore;

class Philosopher extends Thread {
    int id; // ì² í•™ì id
    Semaphore lstick, rstick; // ì™¼ìª½, ì˜¤ë¥¸ìª½ ì “ê°€ë½

    Philosopher(int id, Semaphore lstick, Semaphore rstick) {
        this.id = id;
        this.lstick = lstick;
        this.rstick = rstick;
    }

    public void run() {
        try {
            while (true) {
                lstick.acquire(); // ì™¼ìª½ ì§‘ì–´ë“¤ê¸°
                rstick.acquire(); // ì˜¤ë¥¸ìª½ ì§‘ì–´ë“¤ê¸°
                eating(); // ì‹ì‚¬
                rstick.release(); // ì˜¤ë¥¸ìª½ ë‚´ë ¤ë†“ê¸°
                lstick.release(); // ì™¼ìª½ ë‚´ë ¤ë†“ê¸°
                thinking(); // ìƒê°í•˜ê¸°
            }
        } catch (InterruptedException e) {
            System.out.println("ì˜¤ë¥˜ ë°œìƒ : " + e);
        }
    }

    //    public void run() {
//        try {
//            while(true) {
//                if(id % 2 == 0) { /* idê°€ ì§ìˆ˜ë¼ë©´ */
//                    lstick.acquire(); // ì™¼ìª½ ì§‘ì–´ë“¤ê¸°
//                    rstick.acquire(); // ì˜¤ë¥¸ìª½ ì§‘ì–´ë“¤ê¸°
//                }
//                else { /* idê°€ í™€ìˆ˜ë¼ë©´ */
//                    rstick.acquire(); // ì˜¤ë¥¸ìª½ ì§‘ì–´ë“¤ê¸°
//                    lstick.acquire(); // ì™¼ìª½ ì§‘ì–´ë“¤ê¸°
//                }
//                eating(); // ì‹ì‚¬
//                rstick.release(); // ì˜¤ë¥¸ìª½ ë‚´ë ¤ë†“ê¸°
//                lstick.release(); // ì™¼ìª½ ë‚´ë ¤ë†“ê¸°
//                thinking(); // ìƒê°í•˜ê¸°
//            }
//        } catch (InterruptedException e) {
//            System.out.println("ì˜¤ë¥˜ ë°œìƒ : " + e);
//        }
//    }
    public void eating() {
        System.out.println("[" + id + "] eating..");
    }

    public void thinking() {
        System.out.println("[" + id + "] thinking..");
    }
}

class Main {
    public static final int num = 5; // ì² í•™ì, ì “ê°€ë½ ê°œìˆ˜

    public static void main(String[] args) {
        int i;
        /* ì “ê°€ë½ ì„¸ë§ˆí¬ì–´ numê°œ ë§Œë“¤ê¸° */
        Semaphore[] stick = new Semaphore[num];
        /* ì “ê°€ë½ ì„¸ë§ˆí¬ì–´ ì´ˆê¸°í™” */
        for (i = 0; i < num; i++)
            stick[i] = new Semaphore(1);
        /* ì² í•™ì ìŠ¤ë ˆë“œ numëª… ë§Œë“¤ê¸° */
        Philosopher[] phil = new Philosopher[num];
        /* ì² í•™ì ìŠ¤ë ˆë“œì˜ idì™€ ì–‘ìª½ ì “ê°€ë½ ì´ˆê¸°í™” */
        for (i = 0; i < num; i++)
            phil[i] = new Philosopher(i, stick[i], stick[(i + 1) % num]);
        /* ì² í•™ì ìŠ¤ë ˆë“œ ì‹œì‘ */
        for (i = 0; i < num; i++)
            phil[i].start();
        /* ì² í•™ì ìŠ¤ë ˆë“œ ì‹œì‘ (í™˜í˜• ëŒ€ê¸°)*/
        for (i = 0; i < num; i++)
            phil[i].start();
    }
}
```

5. ë®¤í…ìŠ¤ì™€ ì„¸ë§ˆí¬ì–´ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€?

ë®¤í…ìŠ¤ëŠ” Locking ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ë½ì„ ê±¸ì€ ì“°ë ˆë“œë§Œì´ ì„ê³„ ì˜ì—­ì„ ë‚˜ê°ˆ ë•Œ ë½ì„ í•´ì œí•  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ì„¸ë§ˆí¬ì–´ëŠ” Signaling ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ë½ì„ ê±¸ì§€ ì•Šì€ ì“°ë ˆë“œë„ signalì„ ì‚¬ìš©í•´ ë½ì„ í•´ì œí•  ìˆ˜ ìˆë‹¤.

* ë¬¸í˜œí˜„

[ìš´ì˜ì²´ì œ](https://cooperative-decision-4e6.notion.site/41dfa297611a4757b32c910973b361a1)
